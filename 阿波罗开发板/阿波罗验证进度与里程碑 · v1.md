阿波罗验证进度与里程碑 · v1.0

用于“明确地看到现在的进度和每阶段完成情况”。状态以最新串口日志/代码为准。

里程碑总览

✅ P0 系统基线（完成）

✅ P1 LTDC 基线（片内 D1 SRAM）

证据：LTDCclk≈10 MHz；CFBLR=0x03C003C0；8 彩条稳定 ≥60 s

✅ P2 片内 SRAM(D1) 协同

证据：DMA2D R2M 彩条稳定；Cache 协同生效

✅ P3 DMA2D 基线

证据：NLR=0x01E00110；TCIF 正常；彩条颜色采样正确

✅ P4 SDRAM Bank1 Bring-up（HAL）

证据：三点 16×halfword、64B、128KB 均通过；

FMC_SDCR1=0x00002959、FMC_SDRTR=0x000005F0、SDSR=0x00000000 (NORMAL,BUSY=0)

⏳ P5 LTDC 帧缓冲迁移到 SDRAM Bank1（当前阶段）

目标：CFBAR=0xC0000000 后 8 彩条稳定 ≥60 s

待做：完成迁移与三项打印；屏照 1 张

⬜ P6 及以后：待 P5 完成后排期

当前阶段（P5）— 入口核对清单

 P1–P4 均“通过”

 SDCR1/SDTR1/SDRTR/SDSR 打印可得

 现帧缓冲仍在 D1 SRAM（迁移前状态）

P5 执行记录（占位，完成后填写）

日期：YYYY-MM-DD

提交：<commit SHA> / .ioc：<文件/时间戳>

关键操作（1–3 行）：

设置 CFBAR=0xC0000000 → DMA2D 填充 → Invalidate → 立即重载 → 开背光

证据（≤6 行）：

CFBAR=0xC0000000, CFBLR=0x03C003C0, CFBLNR=0x0110

SDRAM OK: SDCLK=?, CAS=?, REFRESH=?; SDSR=Normal, BUSY=0

LTDCclk≈10 MHz

判定：☐ 通过 / ☐ 未过

若未过：最可能原因（1 行） → 下一步建议（1 行）

屏照：/artifacts/sdram_fb_ok.jpg（占位）

变更与回滚（占位）

本阶段 .ioc 变更：无（沿用 P4）

回滚步骤：CFBAR 切回片内 D1；保留 DMA2D 与重载流程；恢复上一次通过的 fw.elf